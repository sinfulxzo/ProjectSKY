 generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Plan {
  STARTER
  BUSINESS
  PREMIUM
}

model User {
  id             String   @id @default(uuid())
  firstName      String
  lastName       String
  email          String   @unique
  password       String
  agreedToTerms  Boolean  @default(false)
  plan           Plan     @default(STARTER)
  createdAt      DateTime @default(now())

  transactions   Transaction[]
  orders         Order[]
  inventory      Inventory[]
  offers         Offer[]
  progress       Progress[]
}


model Transaction {
  id        String   @id @default(uuid())
  userId    String
  type      String   // "income" or "expense"
  amount    Float
  category  String?
  date      DateTime
  note      String?

  user      User     @relation(fields: [userId], references: [id])
}

model Order {
  id          String   @id @default(uuid())
  userId      String
  status      String
  amount      Float
  description String?
  createdAt   DateTime @default(now())

  user        User     @relation(fields: [userId], references: [id])
}

model Inventory {
  id                String   @id @default(uuid())
  userId            String
  itemName          String
  quantity          Int
  lowStockThreshold Int?
  updatedAt         DateTime @updatedAt

  user              User     @relation(fields: [userId], references: [id])
}

model Offer {
  id         String   @id @default(uuid())
  userId     String
  title      String
  type       String
  discount   Float
  startDate  DateTime
  endDate    DateTime
  status     String

  user       User     @relation(fields: [userId], references: [id])
}

model Progress {
  id        String   @id @default(uuid())
  userId    String
  title     String
  status    String
  note      String?
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())

  user      User     @relation(fields: [userId], references: [id])
}

